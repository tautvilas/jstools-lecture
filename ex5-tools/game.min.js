function bombCount(a){var t=parseInt($(a).attr("data-index")),o=[t-5,t+5];t%5&&o.push(t-1),(t+1)%5&&o.push(t+1);var e=0;return o.forEach(function(a){e+=$(".cell.bomb[data-index="+a+"]").length}),e}function initializeGame(){$(".cell").click(function(){$(this).addClass("discovered"),$(this).hasClass("bomb")?alert("You lose :("):$(this).text(bombCount(this)),$(".cell.discovered:not(.bomb)").length===$(".cell:not(.bomb)").length&&alert("You win!")})}$.getJSON("/board",function(a){for(var t=0;t<a.rows;t++){var o=$("<tr>");$("#board").append(o);for(var e=0;e<a.cols;e++){var n=$("<td>",{"class":"cell","data-index":t*a.cols+e});a.board[t*a.cols+e]&&n.addClass("bomb");var n=$(o).append(n)}}initializeGame()});
